# 超参数总结

## 1.1 命令行超参数（可调节）

| 参数 | 默认值 | 描述 |
|------|--------|------|
| `--name` | `'D1'` | 数据集名称 |
| `--device` | `'cuda:0'` | 计算设备 |
| `--seed` | `0` | 随机种子 |
| `--spatial_k` | `9` | 空间图的K近邻数 |
| `--adj_k` | `20` | 特征图的K近邻数 |
| `--lambda1` | `1.0` | KL散度损失权重 |
| `--lambda2` | `0.1` | 一致性损失权重 |
| `--weight_list` | `[1,1,1,1,1,1]` | 6个重构损失权重 |
| `--lr` | `2e-3` | 学习率 |
| `--pretrain_epoch` | `10000` | 预训练轮数 |
| `--train_epoch` | `5000` | 正式训练轮数 |

## 1.2 模型架构超参数（硬编码在代码中）

| 参数 | 值 | 位置 | 描述 |
|------|----|------|------|
| `enc_dim1` | `256` | `GCNAutoencoder` | GCN编码器第一层维度 |
| `enc_dim2` | `128` | `GCNAutoencoder` | GCN编码器第二层维度 |
| `dec_dim1` | `128` | `GCNAutoencoder` | GCN解码器第一层维度 |
| `dec_dim2` | `256` | `GCNAutoencoder` | GCN解码器第二层维度 |
| `latent_dim` | `20` | `GCNAutoencoder` | 潜在空间维度 |
| `dropout` | `0.1` | `GCNAutoencoder` | Dropout率 |
| `num_layers` | `2` | `GCNAutoencoder` | Transformer层数 |
| `num_heads1/2` | `1` | `GCNAutoencoder` | 注意力头数 |
| `max_length` | `25000` | `trans_encoder` | 位置编码最大长度 |

## 1.3 数据预处理超参数

| 参数 | 值 | 位置 | 描述 |
|------|----|------|------|
| `n_top_genes` | `3000` | `load_data` | RNA高变基因数 |
| `n_comps (RNA)` | `100` | `load_data` | RNA的PCA维度 |
| `n_comps (Protein)` | `n_vars-1` | `load_data` | 蛋白质PCA维度 |
| `min_cells` | `10` | `load_data` | 基因过滤阈值 |

# 针对细胞多组学整合的调参建议

## 2.1 关键超参数调优优先级

### 高优先级

| 参数 | 建议范围 | 理由 |
|------|----------|------|
| `spatial_k` | `5–15` | 空间邻居数量直接影响局部结构学习，稀疏数据用小值(5–7)，密集数据用大值(10–15) |
| `adj_k` | `10–30` | 特征相似性图的连接度，根据细胞类型多样性调整 |
| `lambda1` | `0.1–10` | KL散度权重，控制聚类紧密程度 |
| `lambda2` | `0.01–1` | 多视图一致性，过大会抑制模态特异性 |
| `latent_dim` | `10–50` | 潜在维度，根据细胞类型数和复杂度调整 |

### 中优先级

| 参数 | 建议范围 | 理由 |
|------|----------|------|
| `lr` | `1e-4 – 5e-3` | 学习率，过大导致不稳定，过小收敛慢 |
| `weight_list` | 根据组学权重调整 | RNA通常比蛋白质特征更多，可考虑 `[1,1,1,1,1.5,0.5]` |
| `n_top_genes` | `2000–5000` | 高变基因数，根据数据集规模调整 |

## 2.2 针对不同场景的建议

### 场景1: 细胞类型差异明显
- `spatial_k`: `5–7`（保持局部精细结构）
- `lambda1`: `5–10`（增强聚类）
- `latent_dim`: `15–20`

### 场景2: 细胞类型边界模糊
- `spatial_k`: `10–15`（增加上下文信息）
- `lambda1`: `0.5–2`（避免过度聚类）
- `latent_dim`: `30–50`

### 场景3: 多组学信息不均衡
- `weight_list`: 调整RNA/Protein权重比例
- `lambda2`: `0.01–0.05`（允许模态独立学习）
- 考虑增加模态特异性正则化